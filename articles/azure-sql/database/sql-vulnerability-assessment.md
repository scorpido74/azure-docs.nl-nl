---
title: Evaluatie van SQL-beveiligingsproblemen
titleSuffix: Azure SQL Database & SQL Managed Instance & Azure Synapse Analytics
description: Meer informatie over het configureren van SQL-beveiligings evaluatie en het interpreteren van de evaluatie rapporten over Azure SQL Database, Azure SQL Managed instance en Azure Synapse Analytics.
services: sql-database
ms.service: sql-database
ms.subservice: security
ms.custom: sqldbrb=3
ms.devlang: ''
ms.topic: conceptual
author: mibar
ms.author: mibar
ms.reviewer: vanto, carlrab
ms.date: 04/19/2020
tags: azure-synapse
ms.openlocfilehash: a96e8051b6862085fe34872a9f99e95cab7fdc14
ms.sourcegitcommit: 58ff2addf1ffa32d529ee9661bbef8fbae3cddec
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 06/03/2020
ms.locfileid: "84324688"
---
# <a name="sql-vulnerability-assessment-helps-you-identify-database-vulnerabilities"></a>Evaluatie van SQL-beveiligings problemen helpt u bij het identificeren van database lekken
[!INCLUDE[appliesto-sqldb-sqlmi](../includes/appliesto-sqldb-sqlmi.md)]

Evaluatie van SQL-beveiligings problemen is een eenvoudig te configureren service die u kunt gebruiken om potentiële database problemen op te lossen, op te sporen en te verhelpen. Gebruik de service om de beveiliging van uw database proactief te verbeteren.

De evaluatie van beveiligings problemen maakt deel uit van de [geavanceerde gegevens beveiliging](advanced-data-security.md) . Dit is een uniform pakket voor geavanceerde SQL-beveiligings mogelijkheden. De evaluatie van beveiligings problemen kan worden geopend en beheerd via de centrale SQL Advanced Data Security-Portal.

> [!NOTE]
> Evaluatie van beveiligings problemen wordt ondersteund voor Azure SQL Database, Azure SQL Managed instance en Azure Synapse Analytics (voorheen Azure SQL Data Warehouse). Data bases in Azure SQL Database, Azure SQL Managed instance en Azure Synapse Analytics worden gezamenlijk aangeduid in de rest van dit artikel als data bases en de server verwijst naar de [Server](logical-servers.md) die als host fungeert voor de data bases voor Azure SQL database en Azure Synapse.

## <a name="vulnerability-assessment"></a>Beoordeling van beveiligingslekken

Evaluatie van SQL-beveiligings problemen is een service die inzicht krijgt in uw beveiligings status. De evaluatie van beveiligings problemen omvat stappen die kunnen worden uitgevoerd om beveiligings kwesties op te lossen en uw database beveiliging te verbeteren. Dit kan u helpen:

- Voldoen aan nalevings vereisten waarvoor database scan rapporten zijn vereist.
- Voldoen aan de normen voor gegevens privacy.
- Een dynamische database omgeving bewaken waarbij wijzigingen moeilijk te volgen zijn.

Evaluatie van beveiligings problemen is een in Azure SQL Database ingebouwde Scan service. De service maakt gebruik van een Knowledge Base met regels voor het markeren van beveiligings problemen. Het markeert afwijkingen van aanbevolen procedures, zoals onjuiste configuraties, buitensporige machtigingen en onbeveiligde gevoelige gegevens.

De regels zijn gebaseerd op de best practices van micro soft en zich richten op de beveiligings problemen die de grootste Risico's voor uw data base en de waardevolle gegevens van de computer opleveren. Ze omvatten problemen op database niveau en beveiligings problemen op server niveau, zoals de server firewall-instellingen en machtigingen op server niveau. Deze regels vormen ook een groot aantal vereisten van verschillende regelgevende instanties om te voldoen aan de nalevings normen.

De resultaten van de scan zijn onder andere stappen die kunnen worden uitgevoerd om elk probleem op te lossen en indien van toepassing aangepaste herstel scripts te bieden. U kunt een beoordelings rapport voor uw omgeving aanpassen door een acceptabele basis lijn in te stellen voor:

- Configuratie van machtigingen
- Functie configuraties
- Data base-instellingen

## <a name="implement-vulnerability-assessment"></a>Evaluatie van beveiligings problemen implementeren

Met de volgende stappen wordt de evaluatie van beveiligings problemen geïmplementeerd:

### <a name="1-run-a-scan"></a>1. een scan uitvoeren

1. Ga naar uw Azure SQL Database, SQL Managed instance of Azure Synapse-bron in de [Azure Portal](https://portal.azure.com).

1. Selecteer onder de kop **beveiliging** **geavanceerde gegevens beveiliging**.

1. Klik vervolgens op **opslag selecteren** in het deel venster **evaluatie van beveiligings problemen** om het deel venster instellingen voor evaluatie van beveiligings problemen te openen voor de hele server of een beheerd exemplaar.  

1. Een opslag account configureren waarin de scan resultaten voor alle data bases op de server of het beheerde exemplaar worden opgeslagen. Zie [over Azure Storage-accounts](../../storage/common/storage-account-create.md)voor meer informatie over opslag accounts. Nadat de opslag is geconfigureerd, selecteert u **scannen** om uw data base te scannen op beveiligings problemen.

![Een Data Base scannen](./media/sql-vulnerability-assessment/pp_va_initialize.png)

  > [!NOTE]
  > De scan is licht gewicht en veilig. Het duurt een paar seconden om uit te voeren en is volledig alleen-lezen. Er worden geen wijzigingen aangebracht in uw data base.

### <a name="2-view-the-report"></a>2. het rapport weer geven

Wanneer de scan is voltooid, wordt uw Scan rapport automatisch weer gegeven in de Azure Portal. Het rapport bevat een overzicht van de beveiligings status. Hier wordt weer gegeven hoeveel problemen er zijn gevonden en wat de bijbehorende ernst zijn. De resultaten omvatten waarschuwingen over de aanbevolen procedures en een moment opname van de beveiligings instellingen, zoals databaseprincipal en rollen en de bijbehorende machtigingen. Het Scan rapport bevat ook een overzicht van gevoelige gegevens die in uw data base zijn gedetecteerd. Het bevat aanbevelingen voor het classificeren van gegevens met behulp van [gegevens detectie en-classificatie](data-discovery-and-classification-overview.md).

![Bekijk het rapport](./media/sql-vulnerability-assessment/pp_main_getstarted.png)

### <a name="3-analyze-the-results-and-resolve-issues"></a>3. Analyseer de resultaten en los problemen op

Bekijk uw resultaten en bepaal de bevindingen in het rapport die van toepassing zijn op beveiligings problemen in uw omgeving. Inzoomen op elk mislukt resultaat om inzicht te krijgen in de gevolgen van het zoeken en waarom elke beveiligings controle is mislukt. Gebruik de door het rapport verstrekte herstel gegevens om het probleem op te lossen.

![Het rapport analyseren](./media/sql-vulnerability-assessment/pp_fail_rule_show_remediation.png)

### <a name="4-set-your-baseline"></a>4. de basis lijn instellen

Wanneer u de evaluatie resultaten bekijkt, kunt u specifieke resultaten markeren als een acceptabele *basis lijn* in uw omgeving. De basis lijn is in feite een aanpassing van de manier waarop de resultaten worden gerapporteerd. Resultaten die overeenkomen met de basis lijn, worden beschouwd als het door geven van de daaropvolgende scans. Nadat u de beveiligings status van uw basis lijn hebt ingesteld, evalueert het beveiligings risico alleen rapporten over afwijkingen van de basis lijn. Op deze manier kunt u uw aandacht richten op de relevante problemen.

![Uw basis lijn instellen](./media/sql-vulnerability-assessment/pp_fail_rule_show_baseline.png)

### <a name="5-run-a-new-scan-to-see-your-customized-tracking-report"></a>5. Voer een nieuwe scan uit om het aangepaste tracking rapport te bekijken

Nadat u klaar bent met het instellen van de **basis lijnen**van de regel, voert u een nieuwe scan uit om het aangepaste rapport weer te geven. De evaluatie van beveiligings problemen rapporteert nu alleen de beveiligings kwesties die afwijken van uw goedgekeurde basislijn status.

![Uw aangepaste rapport weer geven](./media/sql-vulnerability-assessment/pp_pass_main_with_baselines.png)

De evaluatie van beveiligings problemen kan nu worden gebruikt om te controleren of uw Data Base op elk moment een hoog niveau van beveiliging houdt en dat aan uw organisatie beleid wordt voldaan. Als nalevings rapporten vereist zijn, kunt u rapporten over de evaluatie van beveiligings problemen nuttig vinden om het nalevings proces te vergemakkelijken.

### <a name="6-set-up-periodic-recurring-scans"></a>6. periodieke terugkerende scans instellen

Ga naar de instellingen voor evaluatie van beveiligings problemen om **periodieke terugkerende scans**in te scha kelen. Met deze instelling configureert u de evaluatie van beveiligings problemen om een keer per week automatisch een scan uit te voeren op uw data base. Er wordt een overzicht van de scan resultaten verzonden naar de e-mail adressen die u opgeeft.

![Uw aangepaste rapport weer geven](./media/sql-vulnerability-assessment/pp_recurring_scans.png)

### <a name="7-export-an-assessment-report"></a>7. een evaluatie rapport exporteren

Selecteer **scan resultaten exporteren** om een Excel-rapport te downloaden dat kan worden gedownload van het resultaat van de scan. Dit rapport bevat een tabblad samen vatting waarop een samen vatting van de evaluatie wordt weer gegeven. Het rapport bevat alle mislukte controles. Het bevat ook een tabblad **resultaten** met de volledige set resultaten van de scan. De resultaten omvatten alle controles die zijn uitgevoerd en de resultaat Details voor elk.

### <a name="8-view-scan-history"></a>8. Scan geschiedenis weer geven

Selecteer **Scan geschiedenis** in het deel venster evaluatie van beveiligings problemen om een geschiedenis weer te geven van alle scans die eerder zijn uitgevoerd op deze data base. Selecteer een bepaalde scan in de lijst om de gedetailleerde resultaten van die scan te bekijken.

De evaluatie van beveiligings problemen kan nu worden gebruikt om te controleren of uw Data Base op elk moment een hoog niveau van beveiliging houdt en dat aan uw organisatie beleid wordt voldaan. Als nalevings rapporten vereist zijn, kunt u rapporten over de evaluatie van beveiligings problemen nuttig vinden om het nalevings proces te vergemakkelijken.

## <a name="manage-vulnerability-assessments-by-using-azure-powershell"></a>Evaluatie van beveiligings problemen beheren met behulp van Azure PowerShell

[!INCLUDE [updated-for-az](../../../includes/updated-for-az.md)]
> [!IMPORTANT]
> De Power shell-Azure Resource Manager module wordt nog steeds ondersteund, maar alle toekomstige ontwikkeling is voor de module AZ. SQL. Zie [AzureRM. SQL](https://docs.microsoft.com/powershell/module/AzureRM.Sql/)voor deze cmdlets. De argumenten voor de opdrachten in de module AZ en in de AzureRm-modules zijn aanzienlijk identiek.

U kunt Azure PowerShell-cmdlets gebruiken om de evaluatie van beveiligings problemen programmatisch te beheren. De ondersteunde cmdlets zijn:

| Naam van cmdlet als een koppeling | Beschrijving |
| :-------------------- | :---------- |
| [Clear-AzSqlDatabaseVulnerabilityAssessmentRuleBaseline](https://docs.microsoft.com/powershell/module/az.sql/Clear-azSqlDatabaseVulnerabilityAssessmentRuleBaseline) | Hiermee wist u de regel basis voor de evaluatie van beveiligings problemen.<br/>Stel eerst de basis lijn in voordat u deze cmdlet gebruikt om deze uit te scha kelen. |
| [Clear-AzSqlDatabaseVulnerabilityAssessmentSetting](https://docs.microsoft.com/powershell/module/az.sql/Clear-azSqlDatabaseVulnerabilityAssessmentSetting) | Wist de instellingen voor evaluatie van beveiligings problemen van een Data Base. |
| [Convert-AzSqlDatabaseVulnerabilityAssessmentScan](https://docs.microsoft.com/powershell/module/az.sql/Convert-azSqlDatabaseVulnerabilityAssessmentScan) | Converteert de scan resultaten van beveiligings problemen naar een Excel-bestand. |
| [Get-AzSqlDatabaseVulnerabilityAssessmentRuleBaseline](https://docs.microsoft.com/powershell/module/az.sql/Get-azSqlDatabaseVulnerabilityAssessmentRuleBaseline) | Hiermee wordt de regel basislijn voor evaluatie van beveiligings problemen opgehaald voor een bepaalde regel. |
| [Get-AzSqlDatabaseVulnerabilityAssessmentScanRecord](https://docs.microsoft.com/powershell/module/az.sql/Get-azSqlDatabaseVulnerabilityAssessmentScanRecord) | Hiermee worden alle Scan records voor evaluatie van beveiligings problemen opgehaald die zijn gekoppeld aan een bepaalde data base. |
| [Get-AzSqlDatabaseVulnerabilityAssessmentSetting](https://docs.microsoft.com/powershell/module/az.sql/Get-azSqlDatabaseVulnerabilityAssessmentSetting) | Retourneert de instellingen voor evaluatie van beveiligings problemen van een Data Base. |
| [Set-AzSqlDatabaseVulnerabilityAssessmentRuleBaseline](https://docs.microsoft.com/powershell/module/az.sql/Set-azSqlDatabaseVulnerabilityAssessmentRuleBaseline) | Hiermee stelt u de regel voor de evaluatie van beveiligings problemen. |
| [Start-AzSqlDatabaseVulnerabilityAssessmentScan](https://docs.microsoft.com/powershell/module/az.sql/Start-azSqlDatabaseVulnerabilityAssessmentScan) | Hiermee wordt het starten van een controle op beveiligings lekken geactiveerd. |
| [Update-AzSqlDatabaseVulnerabilityAssessmentSetting](https://docs.microsoft.com/powershell/module/az.sql/Update-azSqlDatabaseVulnerabilityAssessmentSetting) | Hiermee worden de instellingen voor evaluatie van beveiligings problemen van een Data Base bijgewerkt. |
| &nbsp; | &nbsp; |

Zie voor een script voorbeeld de [Power Shell-ondersteuning voor beveiligings problemen van Azure SQL](https://blogs.msdn.microsoft.com/sqlsecurity/20../../azure-sql-vulnerability-assessment-now-with-powershell-support/).

## <a name="manage-vulnerability-assessment-baseline-rules-by-using-resource-manager-templates"></a>Basis regels voor beoordeling van beveiligings problemen beheren met behulp van Resource Manager-sjablonen

Gebruik het type voor het configureren van basis lijnen voor evaluatie van beveiligings problemen met behulp van Azure Resource Manager sjablonen `Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines` .

Zorg ervoor dat u hebt ingeschakeld `vulnerabilityAssessments` voordat u basis lijnen toevoegt.

Hier volgt een voor beeld van het definiëren van basislijn regel VA2065 in masterdb en VA1143 naar userdb als resources in een resource manager-sjabloon:

```json
   "resources": [
      {
         "type": "Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines",
         "apiVersion": "2018-06-01-preview",
         "name": "[concat(parameters('server_name'),'/', parameters('database_name') , '/default/VA2065/master')]",
         "properties": {
            "baselineResults": [
               {
                  "result": [
                     "FirewallRuleName3",
                     "StartIpAddress",
                     "EndIpAddress"
                  ]
               },
               {
                  "result": [
                     "FirewallRuleName4",
                     "62.92.15.68",
                     "62.92.15.68"
                  ]
               }
            ]
         },
         "type": "Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines",
         "apiVersion": "2018-06-01-preview",
         "name": "[concat(parameters('server_name'),'/', parameters('database_name'), '/default/VA2130/Default')]",
         "dependsOn": [
            "[resourceId('Microsoft.Sql/servers/vulnerabilityAssessments', parameters('server_name'), 'Default')]"
         ],
         "properties": {
            "baselineResults": [
               {
                  "result": [
                     "dbo"
                  ]
               }
            ]
         }
      }
   ]
```

Voor de hoofd database en gebruikers database zijn de resource namen op verschillende manieren gedefinieerd:

- Hoofd database-"naam": "[concat (para meters (' server_name '), '/', para meters (' database_name '), '/default/VA2065/<b>Master</b>')]",
- Gebruikers database-"naam": "[concat (para meters (' server_name '), '/', para meters (' database_name '), '/default/VA2065/<b>default</b>')]",

Als u Boole-typen wilt afhandelen als waar/onwaar, stelt u het basislijn resultaat in op een binaire invoer zoals ' 1 '/' 0 '.

```json
   {
      "type": "Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines",
      "apiVersion": "2018-06-01-preview",
      "name": "[concat(parameters('server_name'),'/', parameters('database_name'), '/default/VA1143/Default')]",

      "dependsOn": [
         "[resourceId('Microsoft.Sql/servers/vulnerabilityAssessments', parameters('server_name'), 'Default')]"
      ],

      "properties": {
         "baselineResults": [
            {
               "result": [
                  "1"
               ]
            }
         ]
      }

   }
```

## <a name="next-steps"></a>Volgende stappen  

- Meer informatie over [geavanceerde gegevens beveiliging](advanced-data-security.md).
- Meer informatie over [gegevens detectie en-classificatie](data-discovery-and-classification-overview.md).
